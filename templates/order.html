{% extends "layout.html" %}
{% block body %}
<div class="row" id="myorders">
  <div data-bind="foreach: status">
    <div data-bind="alert: $data"></div>
  </div>
  <div class="form-group col-lg-6 col-md-6 col-sm-6">
    <h4>You are logged in as {{ current_user.email }}</h4>
<!--     <div data-bind="foreach: order"> -->
      <table class="table table-condensed">
        <thead>
<!--           <tr><th>Farmer Name: </th><tr data-bind="text: $data.farmer"></th></tr> --> 
         <tr><th>Name</th><th>Description</th><th>Units</th><th>Farmer</th><th>Price/Unit</th><th>Available</th><th>Add</th></tr>
        </thead>
        <tbody data-bind="foreach: items">
          <td data-bind="text: $data.name"></td>
          <td data-bind="text: $data.description"></td>
          <td data-bind="text: $data.units"></td>
          <td data-bind="text: $data.farmer"></td>
          <td data-bind="currency: $data.price, symbol: '€'"></td>
          <td data-bind="text: $data.available"></td>
<!--           <td><input data-bind="value: quantity" /></td> -->
          <td><button data-bind="click: $root.addOrder.bind($data, $data.id(), $data.description(), $data.units(), $data.price())" type="button" class="btn btn-primary btn-xs">Add</button></td>
        </tbody>
      </table>
<!--     </div> --> 
  </div>
  <div class="form-group col-lg-6 col-md-6 col-sm-6">

    <h4>Your Order:</h4>
    <table class="table table-condensed resizable">
      <thead>
        <tr><th style="width: 30%;">Item Name</th><th style="width: 25%;">Order Amount</th style="width: 10%;"><th>Units</th><th style="width: 15%;">Price ea.</th><th style="width: 13%;">Subtotal</th><th style="width: 7%;">Del</th></tr>
      </thead>
      <tbody data-bind="foreach: orders ">
        <td data-bind="text: $data.name"></td>
        <td><input onClick="this.select();" data-bind="value: $data.quantity"></input></td>
        <td data-bind="text: $data.units"></td>
        <td data-bind="currency: $data.price, symbol: '€'"></td>
        <td data-bind="currency: $data.subtotal, symbol: '€'"></td>
        <td class="center"><button data-bind="click: $root.removeOrder.bind($data, $data.item_id)" type="button" class="btn btn-primary btn-xs btn-danger">X</button></td>
      </tbody>
    </table>
    <p class="pull-right">Order Total: <span data-bind="currency: $root.total, symbol: '€'"></span></p>
    <button id="submitorder" type="button" class="btn btn-primary">Submit Order</button>
  </div>
</div>
<body>
  {% include "_scripts.html" %}
  {% assets "jsOrders" %}
    <script type="text/javascript" src="{{ ASSET_URL }}"></script>
  {% endassets %}
</body>
{% endblock %}